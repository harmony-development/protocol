syntax = "proto3";

import "harmonytypes/v1/types.proto";

package protocol.chat.v1;

option go_package = "github.com/harmony-development/legato/gen/chat/v1";

// Channel Kinds:
//
// Channel kinds specified in an official Harmony protocol will start with a
// "h." prefix. Third-party extensions should not use the "h." prefix. If no
// kind is specified, the channel is a text channel.
//
// Kinds indicate additional functionality a channel may have: for example,
// h.voice can indicate that a channel has voice functionalities alongside
// the usual text fare.
//
message CreateChannelRequest {
  uint64 guild_id = 1;
  string channel_name = 2; //  [(validate.rules).string.min_len = 1]
  bool is_category = 3;
  harmonytypes.v1.ItemPosition position = 4;
  harmonytypes.v1.Metadata metadata = 5;
}
message CreateChannelResponse { uint64 channel_id = 1; }

message GetGuildChannelsRequest { uint64 guild_id = 1; }
message GetGuildChannelsResponse {
  message Channel {
    harmonytypes.v1.Metadata metadata = 4;
  
    uint64 channel_id = 1;
    string channel_name = 2;
    bool is_category = 3;
  }

  repeated Channel channels = 1;
}

message UpdateChannelInformationRequest {
  uint64 guild_id = 1;
  uint64 channel_id = 2;
  optional string new_name = 3;
  optional harmonytypes.v1.Metadata new_metadata = 4;
}

message UpdateChannelOrderRequest {
  uint64 guild_id = 1;
  uint64 channel_id = 2;
  optional harmonytypes.v1.ItemPosition new_position = 3;
}

message DeleteChannelRequest {
  uint64 guild_id = 1;
  uint64 channel_id = 2;
}

message TypingRequest {
  uint64 guild_id = 1;
  uint64 channel_id = 2;
}
