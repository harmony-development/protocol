syntax = "proto3";

import "google/protobuf/any.proto";

package protocol.harmonytypes.v1;

option go_package = "github.com/harmony-development/legato/gen/harmonytypes/v1";

import "google/protobuf/descriptor.proto";

// Metadata for methods. These are set in individual RPC endpoints and are
// typically used by servers.
message HarmonyMethodMetadata {
  // whether the method requires authentication.
  bool requires_authentication = 1;
  // whether the method allows federation or not.
  bool requires_local = 2;
  // the permission nodes required to invoke the method.
  string requires_permission_node = 3;
}

extend google.protobuf.MethodOptions {
  HarmonyMethodMetadata metadata = 1091;
}

message Metadata {
  string kind = 1;
  map<string, google.protobuf.Any> extension = 2;
}

message Error {
  string identifier = 1;
  string human_message = 2;
  bytes more_details = 3;
}

// Token that will be used for authentication.
message Token {
  // Ed25519 signature of the following serialized protobuf data, signed
  // with a private key. Which private key used to sign will be described
  // in the documentation.
  //
  // Has to be 64 bytes long, otherwise it will be rejected.
  bytes sig = 1;
  // Serialized protobuf data.
  // The protobuf type of this serialized data is dependent on the API endpoint
  // used.
  bytes data = 2;
}

// An object representing an item position between two other items.
message ItemPosition {
  // An object that represents the top of an ordered list.
  message Top {
    uint64 next_id = 1;
  }
  // An object that represents a place between two items in an ordered list.
  message Between {
    uint64 previous_id = 1;
    uint64 next_id = 2;
  }
  // An object that represents the bottom of an ordered list.
  message Bottom {
    uint64 previous_id = 1;
  }

  oneof position {
    Top top = 1;
    Between between = 2;
    Bottom bottom = 3;
  }
}